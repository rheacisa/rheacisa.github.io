<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhea Nygard - Career Progression</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        body {
            margin: 0;
            padding: 40px;
            background-color: #0f172a; /* Dark Slate */
            color: #cbd5e1; /* Light Slate Text */
            font-family: 'Urbanist', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            width: 100%;
        }

        /* Header Text */
        .header-text {
            text-align: center;
            font-size: 24px;
            line-height: 1.5;
            max-width: 1000px;
            margin: 0 auto 60px auto;
            color: #f8fafc;
        }

        /* Timeline Container */
        .timeline-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            gap: 20px;
        }

        /* Individual Step */
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            flex: 1;
            position: relative;
            z-index: 2;
        }

        /* Icon Circle */
        .icon-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #1e293b;
            border: 2px solid #deff9a;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 25px;
            box-shadow: 0 0 15px rgba(222, 255, 154, 0.2);
            transition: transform 0.3s ease;
        }

        .step:hover .icon-circle {
            transform: scale(1.05);
            background-color: #deff9a;
        }

        .icon-circle i {
            font-size: 40px;
            color: #deff9a;
            transition: color 0.3s ease;
        }

        .step:hover .icon-circle i {
            color: #0f172a;
        }

        /* Connecting Arrows */
        .arrow-connector {
            position: absolute;
            top: 50px; /* Center with circle */
            left: 50%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #334155 0%, #deff9a 50%, #334155 100%);
            z-index: 1;
            display: none; /* Hidden by default, handled by pseudo elements if needed, or simple spacers */
        }
        
        /* Using FontAwesome Chevrons for arrows between steps */
        .chevron-separator {
            align-self: flex-start;
            margin-top: 40px; /* Align with icons */
            color: #475569;
            font-size: 24px;
        }

        /* Text Content */
        .role-title {
            font-size: 28px;
            font-weight: 700;
            color: #f8fafc;
            margin: 0 0 5px 0;
        }

        .role-duration {
            font-size: 18px;
            color: #deff9a;
            font-weight: 500;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .role-description {
            font-size: 18px;
            line-height: 1.6;
            color: #94a3b8;
            padding: 0 10px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .timeline-wrapper {
                flex-direction: column;
                gap: 40px;
            }
            
            .chevron-separator {
                transform: rotate(90deg);
                align-self: center;
                margin: 0;
            }
        }

        /* --- AI Features Styles --- */
        .ai-controls {
            text-align: center;
            margin-top: 60px;
            padding-bottom: 40px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .ai-btn {
            background: linear-gradient(135deg, #deff9a 0%, #a3e635 100%);
            color: #0f172a;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 700;
            font-family: 'Urbanist', sans-serif;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(222, 255, 154, 0.2);
        }

        .ai-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(222, 255, 154, 0.4);
        }

        .ai-btn i { font-size: 20px; }

        .ai-output-container {
            max-width: 900px;
            margin: 0 auto;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 16px;
            padding: 40px;
            text-align: left;
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .ai-output-container h4 {
            color: #deff9a;
            margin-top: 0;
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-content {
            font-size: 18px;
            line-height: 1.7;
            color: #cbd5e1;
            white-space: pre-line;
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 380px;
            height: 550px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
            transform: translateY(120%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-widget.open { transform: translateY(0); }

        .chat-header {
            background: #1e293b;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #334155;
        }

        .chat-header h4 { margin: 0; color: #f8fafc; font-size: 18px; font-weight: 700; }
        .close-chat { background: none; border: none; color: #94a3b8; cursor: pointer; font-size: 20px; transition: color 0.2s; }
        .close-chat:hover { color: #f8fafc; }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #0b1120;
        }

        .message {
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.5;
            max-width: 85%;
            word-wrap: break-word;
        }

        .user-msg { 
            background: #334155; 
            color: #f8fafc; 
            align-self: flex-end; 
            border-bottom-right-radius: 2px;
        }

        .ai-msg { 
            background: rgba(222, 255, 154, 0.05); 
            color: #cbd5e1; 
            align-self: flex-start; 
            border: 1px solid rgba(222, 255, 154, 0.2);
            border-bottom-left-radius: 2px;
        }

        .chat-input-area {
            padding: 15px;
            border-top: 1px solid #334155;
            display: flex;
            gap: 10px;
            background: #1e293b;
        }

        .chat-input {
            flex: 1;
            background: #0f172a;
            border: 1px solid #334155;
            color: #f8fafc;
            padding: 12px;
            border-radius: 8px;
            outline: none;
            font-family: 'Urbanist', sans-serif;
        }

        .chat-input:focus { border-color: #deff9a; }

        .send-btn {
            background: #deff9a;
            color: #0f172a;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .send-btn:hover { background: #bef264; }

        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; }
        }
    </style>
</head>
<body>

<div class="container">
    <p class="header-text">
        Rhea is a leader who speaks the languages of banking, auditing, regulation, and technology.
    </p>

    <div class="timeline-wrapper">
        
        <!-- Step 1: Auditor (Moved to first position) -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-file-invoice-dollar"></i>
            </div>
            <h3 class="role-title">Auditor</h3>
            <div class="role-duration">8 Years | Deloitte</div>
            <p class="role-description">
                Third line of defense. Mastered the art of making workpapers stand on their own and assessing controls with rigorous evidence.
            </p>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 2: Banker (Moved to second position) -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-vault"></i>
            </div>
            <h3 class="role-title">Banker</h3>
            <div class="role-duration">6 Years | Citi</div>
            <p class="role-description">
                First and second line of defense. Understands business pressures, IT implementation for compliance, and end-to-end payment systems.
            </p>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 3: Regulator -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-landmark"></i>
            </div>
            <h3 class="role-title">Regulator</h3>
            <div class="role-duration">16+ Years | FDIC & Fed (FRB Dallas and Board of Governors)</div>
            <p class="role-description">
                Fourth line of defense. Deep experience with troubled institutions, enforcement actions, interagency policy, operational resilience, cybersecurity and financial stability.
            </p>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 4: Technologist -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-microchip"></i>
            </div>
            <h3 class="role-title">Technologist</h3>
            <div class="role-duration">Lifelong Learner</div>
            <p class="role-description">
                A self-starter who relentlessly upskills to understand and counter emerging threats.
            </p>
        </div>

    </div>
</div>

<!-- AI Features Interface -->
<div class="ai-controls">
    <button class="ai-btn" onclick="analyzeCareer()">
        <i class="fa-solid fa-wand-magic-sparkles"></i> Analyze Career Path
    </button>
    <button class="ai-btn" onclick="toggleChat()">
        <i class="fa-solid fa-comments"></i> Chat with Sentinel
    </button>
</div>

<div class="container ai-output-container" id="analysisResult">
    <h4><i class="fa-solid fa-chart-line"></i> Career Analysis</h4>
    <div class="ai-content" id="analysisContent">
        <span class="loading-dots">Generating insights based on timeline data</span>
    </div>
</div>

<!-- Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-header">
        <h4><i class="fa-solid fa-robot"></i> Rhea's Career Sentinel</h4>
        <button class="close-chat" onclick="toggleChat()"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="chat-messages" id="chatMessages">
        <div class="message ai-msg">
            Hello! I am the AI Sentinel. I've analyzed Rhea's career timeline. Ask me about her regulatory experience, technical skills, or banking background.
        </div>
    </div>
    <div class="chat-input-area">
        <input type="text" class="chat-input" id="chatInput" placeholder="Ask a question..." onkeypress="handleEnter(event)">
        <button class="send-btn" onclick="sendMessage()"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
</div>

<script>
    const apiKey = ""; // System provides this at runtime

    // 1. Context Extraction
    function getTimelineContext() {
        const header = document.querySelector('.header-text').innerText;
        const steps = Array.from(document.querySelectorAll('.step')).map(step => {
            const role = step.querySelector('.role-title').innerText;
            const duration = step.querySelector('.role-duration').innerText;
            const desc = step.querySelector('.role-description').innerText;
            return `Role: ${role}\nDuration: ${duration}\nDetails: ${desc}`;
        }).join('\n\n');
        
        return `Bio Header: ${header}\n\nTimeline:\n${steps}`;
    }

    // 2. Career Analysis Feature
    async function analyzeCareer() {
        const container = document.getElementById('analysisResult');
        const contentDiv = document.getElementById('analysisContent');
        container.style.display = 'block';
        contentDiv.innerHTML = '<span class="loading-dots">Analyzing career trajectory using Gemini</span>';

        // Scroll to the result
        container.scrollIntoView({ behavior: 'smooth', block: 'start' });

        const context = getTimelineContext();
        const prompt = `Act as an executive career coach. Analyze the following career timeline for Rhea Nygard. 
        Identify the unique value proposition created by the intersection of these specific roles (Auditor, Banker, Regulator, Technologist). 
        Suggest 2 strategic future roles that would leverage this specific combination of skills.
        Keep it professional, concise, and use bullet points.
        
        ${context}`;

        try {
            const response = await callGemini(prompt);
            // Format bullet points for HTML
            const formattedResponse = response.replace(/\*/g, 'â€¢').replace(/\n/g, '<br>');
            contentDiv.innerHTML = formattedResponse;
        } catch (error) {
            contentDiv.innerHTML = "Error analyzing profile. Please try again.";
            console.error(error);
        }
    }

    // 3. Chat Feature
    let isChatOpen = false;

    function toggleChat() {
        const widget = document.getElementById('chatWidget');
        isChatOpen = !isChatOpen;
        if (isChatOpen) {
            widget.classList.add('open');
            document.getElementById('chatInput').focus();
        } else {
            widget.classList.remove('open');
        }
    }

    function handleEnter(e) {
        if (e.key === 'Enter') sendMessage();
    }

    function appendMessage(text, sender) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `message ${sender}-msg`;
        msgDiv.innerText = text;
        const messagesContainer = document.getElementById('chatMessages');
        messagesContainer.appendChild(msgDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    async function sendMessage() {
        const input = document.getElementById('chatInput');
        const userText = input.value.trim();
        if (!userText) return;

        // Clear input
        input.value = '';
        appendMessage(userText, 'user');

        // Show loading state
        const loadingId = 'loading-' + Date.now();
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'message ai-msg loading-dots';
        loadingDiv.id = loadingId;
        loadingDiv.innerText = 'Thinking';
        document.getElementById('chatMessages').appendChild(loadingDiv);

        const context = getTimelineContext();
        const prompt = `You are a helpful AI assistant representing Rhea Nygard. Use the following resume data to answer the user's question. 
        If the answer is not in the data, state that you don't have that information. Be professional and enthusiastic.
        
        Resume Data:
        ${context}
        
        User Question: ${userText}`;

        try {
            const response = await callGemini(prompt);
            document.getElementById(loadingId).remove();
            appendMessage(response, 'ai');
        } catch (error) {
            document.getElementById(loadingId).remove();
            appendMessage("I'm having trouble connecting right now. Please try again.", 'ai');
        }
    }

    // Core Gemini API Call
    async function callGemini(prompt) {
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        
        const payload = {
            contents: [{
                parts: [{ text: prompt }]
            }]
        };

        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error('API Error');

        const data = await response.json();
        return data.candidates[0].content.parts[0].text;
    }
</script>

</body>
</html>