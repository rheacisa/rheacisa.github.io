<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhea Nygard - Career Progression</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        body {
            margin: 0;
            padding: 40px;
            background-color: #0f172a; /* Dark Slate */
            color: #cbd5e1; /* Light Slate Text */
            font-family: 'Urbanist', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            width: 100%;
        }

        /* Header Text */
        .header-text {
            text-align: center;
            font-size: 24px;
            line-height: 1.5;
            max-width: 1000px;
            margin: 0 auto 60px auto;
            color: #f8fafc;
        }

        /* Timeline Container */
        .timeline-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            gap: 20px;
        }

        /* Individual Step */
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            flex: 1;
            position: relative;
            z-index: 2;
        }

        /* Icon Circle */
        .icon-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #1e293b;
            border: 2px solid #deff9a;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 25px;
            box-shadow: 0 0 15px rgba(222, 255, 154, 0.2);
            transition: transform 0.3s ease;
        }

        .step:hover .icon-circle {
            transform: scale(1.05);
            background-color: #deff9a;
        }

        .icon-circle i {
            font-size: 40px;
            color: #deff9a;
            transition: color 0.3s ease;
        }

        .step:hover .icon-circle i {
            color: #0f172a;
        }

        /* Detail Toggle Button */
        .toggle-btn {
            background: transparent;
            border: 1px solid #deff9a;
            color: #deff9a;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Urbanist', sans-serif;
            font-size: 14px;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .toggle-btn:hover {
            background: rgba(222, 255, 154, 0.1);
        }

        /* Hidden Details Section */
        .step-details {
            display: none; /* Hidden by default */
            margin-top: 20px;
            background: #1e293b;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #334155;
            text-align: left;
            width: 100%;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-details h4 {
            color: #f8fafc;
            margin: 0 0 10px 0;
            font-size: 18px;
        }

        .step-details ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .step-details li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 8px;
            font-size: 16px;
            color: #cbd5e1;
            line-height: 1.4;
        }

        .step-details li::before {
            content: '•';
            color: #deff9a;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* Connecting Arrows */
        .arrow-connector {
            position: absolute;
            top: 50px; /* Center with circle */
            left: 50%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #334155 0%, #deff9a 50%, #334155 100%);
            z-index: 1;
            display: none; /* Hidden by default, handled by pseudo elements if needed, or simple spacers */
        }
        
        /* Using FontAwesome Chevrons for arrows between steps */
        .chevron-separator {
            align-self: flex-start;
            margin-top: 40px; /* Align with icons */
            color: #475569;
            font-size: 24px;
        }

        /* Text Content */
        .role-title {
            font-size: 28px;
            font-weight: 700;
            color: #f8fafc;
            margin: 0 0 5px 0;
        }

        .role-duration {
            font-size: 18px;
            color: #deff9a;
            font-weight: 500;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .role-description {
            font-size: 18px;
            line-height: 1.6;
            color: #94a3b8;
            padding: 0 10px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .timeline-wrapper {
                flex-direction: column;
                gap: 40px;
            }
            
            .chevron-separator {
                transform: rotate(90deg);
                align-self: center;
                margin: 0;
            }
        }

        /* --- AI Features Styles --- */
        .ai-controls {
            text-align: center;
            margin-top: 60px;
            padding-bottom: 40px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .ai-btn {
            background: linear-gradient(135deg, #deff9a 0%, #a3e635 100%);
            color: #0f172a;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 700;
            font-family: 'Urbanist', sans-serif;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(222, 255, 154, 0.2);
        }

        .ai-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(222, 255, 154, 0.4);
        }

        .ai-btn i { font-size: 20px; }

        .ai-output-container {
            max-width: 900px;
            margin: 0 auto;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 16px;
            padding: 40px;
            text-align: left;
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .ai-output-container h4 {
            color: #deff9a;
            margin-top: 0;
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-content {
            font-size: 18px;
            line-height: 1.7;
            color: #cbd5e1;
            white-space: pre-line;
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 380px;
            height: 550px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
            transform: translateY(120%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-widget.open { transform: translateY(0); }

        .chat-header {
            background: #1e293b;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #334155;
        }

        .chat-header h4 { margin: 0; color: #f8fafc; font-size: 18px; font-weight: 700; }
        .close-chat { background: none; border: none; color: #94a3b8; cursor: pointer; font-size: 20px; transition: color 0.2s; }
        .close-chat:hover { color: #f8fafc; }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #0b1120;
        }

        .message {
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.5;
            max-width: 85%;
            word-wrap: break-word;
        }

        .user-msg { 
            background: #334155; 
            color: #f8fafc; 
            align-self: flex-end; 
            border-bottom-right-radius: 2px;
        }

        .ai-msg { 
            background: rgba(222, 255, 154, 0.05); 
            color: #cbd5e1; 
            align-self: flex-start; 
            border: 1px solid rgba(222, 255, 154, 0.2);
            border-bottom-left-radius: 2px;
        }

        .chat-input-area {
            padding: 15px;
            border-top: 1px solid #334155;
            display: flex;
            gap: 10px;
            background: #1e293b;
        }

        .chat-input {
            flex: 1;
            background: #0f172a;
            border: 1px solid #334155;
            color: #f8fafc;
            padding: 12px;
            border-radius: 8px;
            outline: none;
            font-family: 'Urbanist', sans-serif;
        }

        .chat-input:focus { border-color: #deff9a; }

        .send-btn {
            background: #deff9a;
            color: #0f172a;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .send-btn:hover { background: #bef264; }

        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; }
        }
    </style>
</head>
<body>

<div class="container">
    <p class="header-text">
        Rhea is a leader who speaks the languages of auditing, banking, regulation, and technology.
    </p>

    <div class="timeline-wrapper">
        
        <!-- Step 1: Auditor (Moved to first position) -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-magnifying-glass-chart"></i>
            </div>
            <h3 class="role-title">Auditor</h3>
            <div class="role-duration">8 Years | Deloitte</div>
            <p class="role-description">
                Third line of defense. Mastered the art of making workpapers stand on their own and assessing controls with evidence.
            </p>
            
            <button class="toggle-btn" onclick="toggleDetails('auditor-details', this)">
                <i class="fa-solid fa-chevron-down"></i> more
            </button>

            <div id="auditor-details" class="step-details">
                <h4>Auditor / Consultant | Deloitte</h4>
                <ul>
                    <li>Conducted full-scope audit activities, including pre-engagement planning, internal controls testing, and audit fieldwork for financial statements and management letters.</li>
                    <li>Successfully applied Generally Accepted Accounting Principles (GAAP) across engagements in diverse industries, including power utility, trust, publishing, and pipe distribution.</li>
                    <li>Participated in international and domestic assignments, including a Deloitte exchange program with travel to Yap, Marshall Islands, and Australia, as well as a transition to Deloitte USA to service new clients in Las Vegas, Reno, Colorado, and Los Angeles.</li>
                    <li><strong>Certification:</strong> CPA (Certified Public Accountant)</li>
                </ul>
            </div>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 2: Banker (Moved to second position) -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-vault"></i>
            </div>
            <h3 class="role-title">Banker</h3>
            <div class="role-duration">6 Years | Citi</div>
            <p class="role-description">
                First and second line of defense. Understands business pressures, intersection of technology and compliance, and end-to-end payment systems
            </p>

            <button class="toggle-btn" onclick="toggleDetails('banker-details', this)">
                <i class="fa-solid fa-chevron-down"></i> more
            </button>

            <div id="banker-details" class="step-details">
                <h4>Banker | Citi</h4>
                <ul>
                    <li><strong>Product Management & Technology Leadership:</strong> Expertise in managing and developing consumer and corporate deposit products and business loans across onshore and offshore markets (Singapore, Asia-Pacific). Served as SME on Eclipse CRM and Sales Station for Retail Bank Deposits. Led the development of functional specifications and user acceptance testing (UAT) for new platform features in the Business Online project, wealth planning, and sales consultation, including recommending a tailored security matrix.</li>
                    <li><strong>Compliance & Regulatory Expertise:</strong> Critical resource for functional specifications, ensuring platform features and deposit sales processes (e.g., account opening, charging sequence) complied with country-specific rules, including USA Reg C (funds availability) and Reg DD (limits on transfers). Deep experience coordinating complex regulatory projects, including leading OCC reviews for deposits and coordinating multi-country initiatives like the "Rainbow project" across seven Citi countries in Asia.</li>
                    <li><strong>Financial Control & Audit:</strong> Skilled in managing internal control, General Ledger (GL) reconciliation, and leading audit reviews. Successfully led the migration of GL systems and automated reconciliation processes, reducing a key task time from one hour to 15 minutes.</li>
                </ul>
            </div>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 2: Banker (Moved to second position) -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-vault"></i>
            </div>
            <h3 class="role-title">Banker</h3>
            <div class="role-duration">6 Years | Citi</div>
            <p class="role-description">
                First and second line of defense. Understands business pressures, intersection of technology and compliance, and end-to-end payment systems
            </p>

            <button class="toggle-btn" onclick="toggleDetails('banker-details', this)">
                <i class="fa-solid fa-chevron-down"></i> more
            </button>

            <div id="banker-details" class="step-details">
                <h4>Banker | Citi</h4>
                <ul>
                    <li><strong>Product Management & Technology Leadership:</strong> Expertise in managing and developing consumer and corporate deposit products and business loans across onshore and offshore markets (Singapore, Asia-Pacific). Served as SME on Eclipse CRM and Sales Station for Retail Bank Deposits. Led the development of functional specifications and user acceptance testing (UAT) for new platform features in the Business Online project, wealth planning, and sales consultation, including recommending a tailored security matrix.</li>
                    <li><strong>Compliance & Regulatory Expertise:</strong> Critical resource for functional specifications, ensuring platform features and deposit sales processes (e.g., account opening, charging sequence) complied with country-specific rules, including USA Reg C (funds availability) and Reg DD (limits on transfers). Deep experience coordinating complex regulatory projects, including leading OCC reviews for deposits and coordinating multi-country initiatives like the "Rainbow project" across seven Citi countries in Asia.</li>
                    <li><strong>Financial Control & Audit:</strong> Skilled in managing internal control, General Ledger (GL) reconciliation, and leading audit reviews. Successfully led the migration of GL systems and automated reconciliation processes, reducing a key task time from one hour to 15 minutes.</li>
                    <li><strong>Certification:</strong> CPA (Certified Public Accountant)</li>
                </ul>
            </div>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 3: Regulator -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-landmark"></i>
            </div>
            <h3 class="role-title">Regulator</h3>
            <div class="role-duration">16+ Years | FDIC & Fed</div>
            <p class="role-description">
                Fourth line of defense. Deep experience with troubled institutions, enforcement actions, interagency policy, operational resilience, cybersecurity and financial stability.
            </p>

            <button class="toggle-btn" onclick="toggleDetails('regulator-details', this)">
                <i class="fa-solid fa-chevron-down"></i> more
            </button>

            <div id="regulator-details" class="step-details">
                <h4>Regulator | Experience Details</h4>
                
                <div style="margin-bottom: 8px;">
                    <strong style="color: #deff9a;">Board of Governors, Senior Cybersecurity Policy Analyst</strong>
                </div>
                <ul>
                    <li>Shaped domestic and international cybersecurity and operational resilience policies, with a specialized focus on emerging technologies (e.g., AI, Quantum Computing, Blockchain) and managing third-party risk.</li>
                </ul>

                <div style="margin-bottom: 8px; margin-top: 15px;">
                    <strong style="color: #deff9a;">Dallas FRB, Safety and Soundness, and IT Commissioned Examiner</strong>
                </div>
                <ul>
                    <li>Developed and delivered specialized internal training curricula concerning emerging technologies, including blockchain and crypto-assets.</li>
                    <li>Led critical, specialized IT examinations for key Financial Market Infrastructures (FMIs) and Technology Service Providers (TSPs).</li>
                    <li>Directed operational risk validation for financial institutions operating under enforcement actions.</li>
                </ul>

                <div style="margin-bottom: 8px; margin-top: 15px;">
                    <strong style="color: #deff9a;">FDIC, Financial Institution Accountant (Bank Failure Resolution Support)</strong>
                </div>
                <ul>
                    <li>Served as a core member of the pro-forma team during bank failure resolutions.</li>
                    <li>Quickly prepared opening balance sheets for acquiring institutions, offering direct insight into systemic issues that prompted financial failure and regulatory intervention.</li>
                </ul>

                <div style="margin-bottom: 8px; margin-top: 15px;">
                    <strong style="color: #deff9a;">Certifications</strong>
                </div>
                <ul>
                    <li>Certified Anti-Money Laundering Specialist (ACAMS)</li>
                </ul>
            </div>
        </div>

        <i class="fa-solid fa-chevron-right chevron-separator"></i>

        <!-- Step 4: Technologist -->
        <div class="step">
            <div class="icon-circle">
                <i class="fa-solid fa-microchip"></i>
            </div>
            <h3 class="role-title">Technologist</h3>
            <div class="role-duration">Lifelong Learner</div>
            <p class="role-description">
                A self-starter who relentlessly upskills to understand and counter emerging threats.
            </p>

            <button class="toggle-btn" onclick="toggleDetails('technologist-details', this)">
                <i class="fa-solid fa-chevron-down"></i> more
            </button>

            <div id="technologist-details" class="step-details">
                <h4>Technologist | Skills & Certifications</h4>
                
                <div style="margin-bottom: 8px;">
                    <strong style="color: #deff9a;">Cybersecurity</strong>
                </div>
                <ul>
                    <li><strong>GCIH:</strong> Certified Incident Handler</li>
                    <li><strong>CISA:</strong> Certified Information Systems Auditor</li>
                    <li><strong>CCZT:</strong> Certificate of Competence in Zero Trust</li>
                    <li><strong>GFACT:</strong> GIAC Foundational Cybersecurity Technologies</li>
                    <li><strong>GSTRT:</strong> Strategic Planning, Policy and Leadership</li>
                </ul>

                <div style="margin-bottom: 8px; margin-top: 15px;">
                    <strong style="color: #deff9a;">Cloud</strong>
                </div>
                <ul>
                    <li><strong>AWS:</strong> Certified Cloud Practitioner</li>
                    <li><strong>Google Cloud:</strong> Digital Leader</li>
                    <li><strong>Azure:</strong> AI & Data Fundamentals</li>
                    <li><strong>GCLD:</strong> Cloud Security Essentials</li>
                    <li><strong>CCSK:</strong> Certified Cloud Security Knowledge</li>
                </ul>

                <div style="margin-bottom: 8px; margin-top: 15px;">
                    <strong style="color: #deff9a;">Emerging Tech</strong>
                </div>
                <ul>
                    <li>Professional development courses on AI, Quantum, Blockchain, Smart Contract through SANS Technology Institute, MIT and University of Texas at Austin</li>
                    <li>Subject Matter Expert (SME) for ISACA CISA test bank.</li>
                </ul>
            </div>
        </div>

    </div>

    <!-- AI Features Interface (Moved inside container) -->
    <div class="ai-controls">
        <button class="ai-btn" onclick="analyzeCareer()">
            <i class="fa-solid fa-wand-magic-sparkles"></i> Analyze Career Path
        </button>
        <button class="ai-btn" onclick="toggleChat()">
            <i class="fa-solid fa-comments"></i> Chat with Sentinel
        </button>
    </div>

    <div class="ai-output-container" id="analysisResult">
        <h4><i class="fa-solid fa-chart-line"></i> Career Analysis</h4>
        <div class="ai-content" id="analysisContent">
            <span class="loading-dots">Generating insights based on timeline data</span>
        </div>
    </div>

</div>

<!-- Chat Widget -->
<div class="chat-widget" id="chatWidget">
    <div class="chat-header">
        <h4><i class="fa-solid fa-robot"></i> Rhea's Career Sentinel</h4>
        <button class="close-chat" onclick="toggleChat()"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="chat-messages" id="chatMessages">
        <div class="message ai-msg">
            Hello! I am the AI Sentinel. I've analyzed Rhea's career timeline. Ask me about her regulatory experience, technical skills, or banking background.
        </div>
    </div>
    <div class="chat-input-area">
        <input type="text" class="chat-input" id="chatInput" placeholder="Ask a question..." onkeypress="handleEnter(event)">
        <button class="send-btn" onclick="sendMessage()"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
</div>

<script>
    const apiKey = ""; // System provides this at runtime

    // 1. Context Extraction
    function getTimelineContext() {
        const header = document.querySelector('.header-text').innerText;
        const steps = Array.from(document.querySelectorAll('.step')).map(step => {
            const role = step.querySelector('.role-title').innerText;
            const duration = step.querySelector('.role-duration').innerText;
            const desc = step.querySelector('.role-description').innerText;
            return `Role: ${role}\nDuration: ${duration}\nDetails: ${desc}`;
        }).join('\n\n');
        
        return `Bio Header: ${header}\n\nTimeline:\n${steps}`;
    }

    // 2. Career Analysis Feature
    async function analyzeCareer() {
        const container = document.getElementById('analysisResult');
        const contentDiv = document.getElementById('analysisContent');
        container.style.display = 'block';
        contentDiv.innerHTML = '<span class="loading-dots">Analyzing career trajectory using Gemini</span>';

        // Scroll to the result
        container.scrollIntoView({ behavior: 'smooth', block: 'start' });

        const context = getTimelineContext();
        const prompt = `Act as an executive career coach. Analyze the following career timeline for Rhea Nygard. 
        Identify the unique value proposition created by the intersection of these specific roles (Auditor, Banker, Regulator, Technologist). 
        Suggest 2 strategic future roles that would leverage this specific combination of skills.
        Keep it professional, concise, and use bullet points.
        
        ${context}`;

        try {
            const response = await callGemini(prompt);
            // Format bullet points for HTML
            const formattedResponse = response.replace(/\*/g, '•').replace(/\n/g, '<br>');
            contentDiv.innerHTML = formattedResponse;
        } catch (error) {
            contentDiv.innerHTML = "Error analyzing profile. Please try again.";
            console.error(error);
        }
    }

    // 3. Chat Feature
    let isChatOpen = false;

    // Toggle Details Function
    function toggleDetails(id, btn) {
        const details = document.getElementById(id);
        const icon = btn.querySelector('i');
        
        if (details.style.display === 'block') {
            details.style.display = 'none';
            btn.innerHTML = '<i class="fa-solid fa-chevron-down"></i> more';
            btn.style.background = 'transparent';
            btn.style.color = '#deff9a';
        } else {
            details.style.display = 'block';
            btn.innerHTML = '<i class="fa-solid fa-chevron-up"></i> less';
            btn.style.background = '#deff9a';
            btn.style.color = '#0f172a';
        }
    }

    function toggleChat() {
        const widget = document.getElementById('chatWidget');
        isChatOpen = !isChatOpen;
        if (isChatOpen) {
            widget.classList.add('open');
            document.getElementById('chatInput').focus();
        } else {
            widget.classList.remove('open');
        }
    }

    function handleEnter(e) {
        if (e.key === 'Enter') sendMessage();
    }

    function appendMessage(text, sender) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `message ${sender}-msg`;
        msgDiv.innerText = text;
        const messagesContainer = document.getElementById('chatMessages');
        messagesContainer.appendChild(msgDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    async function sendMessage() {
        const input = document.getElementById('chatInput');
        const userText = input.value.trim();
        if (!userText) return;

        // Clear input
        input.value = '';
        appendMessage(userText, 'user');

        // Show loading state
        const loadingId = 'loading-' + Date.now();
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'message ai-msg loading-dots';
        loadingDiv.id = loadingId;
        loadingDiv.innerText = 'Thinking';
        document.getElementById('chatMessages').appendChild(loadingDiv);

        const context = getTimelineContext();
        const prompt = `You are a helpful AI assistant representing Rhea Nygard. Use the following resume data to answer the user's question. 
        If the answer is not in the data, state that you don't have that information. Be professional and enthusiastic.
        
        Resume Data:
        ${context}
        
        User Question: ${userText}`;

        try {
            const response = await callGemini(prompt);
            document.getElementById(loadingId).remove();
            appendMessage(response, 'ai');
        } catch (error) {
            document.getElementById(loadingId).remove();
            appendMessage("I'm having trouble connecting right now. Please try again.", 'ai');
        }
    }

    // Core Gemini API Call
    async function callGemini(prompt) {
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        
        const payload = {
            contents: [{
                parts: [{ text: prompt }]
            }]
        };

        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error('API Error');

        const data = await response.json();
        return data.candidates[0].content.parts[0].text;
    }
</script>

</body>
</html>